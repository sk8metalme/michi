# 完全発見プロセス（Full Discovery）

このドキュメントは、新機能や複雑な機能の設計時に実施すべき包括的な発見プロセスを定義します。

## 適用対象

以下の場合に、完全発見プロセスを実行してください:
- **新機能**（グリーンフィールド）
- **複雑な統合**
- **アーキテクチャに大きな影響を与える変更**

## 発見プロセス

### 1. WebSearch/WebFetchを使用した徹底的な調査

#### 最新のアーキテクチャパターンとベストプラクティス

- 同様の機能を実装した事例を検索
- 業界標準のパターンを調査
- 最新のベストプラクティスを確認
- アンチパターンと落とし穴を把握

**検索例**:
- "best practices for [機能名] [技術スタック]"
- "[機能名] architecture patterns 2025"
- "[技術名] implementation guide"

#### 外部依存関係の検証

以下を確認:
- **APIの仕様とバージョン**:
  - 使用するAPIのバージョン
  - 利用可能なエンドポイント
  - レート制限とクォータ
  - 認証方式

- **ライブラリの互換性**:
  - ライブラリのバージョン
  - 依存関係の競合チェック
  - メンテナンス状況
  - ライセンス

- **既知の問題**:
  - GitHub Issues
  - Stack Overflow
  - 公式ドキュメントの既知の問題セクション

#### 公式ドキュメントの確認

- 公式ドキュメント（最新版）
- 移行ガイド（バージョンアップ時）
- チュートリアルとサンプルコード
- Changelog と Release Notes

#### パフォーマンスとセキュリティ考慮事項

- **パフォーマンスベンチマーク**:
  - 既知のパフォーマンス特性
  - ボトルネック事例
  - 最適化手法

- **セキュリティ考慮事項**:
  - OWASP Top 10 の該当項目
  - 既知の脆弱性（CVE）
  - セキュリティベストプラクティス

### 2. 発見結果の保持

以下の情報を整理し、ステップ3で使用できるようにする:

#### 外部APIコントラクトと制約

- API仕様書の参照URL
- 重要なエンドポイントの詳細
- 制約（レート制限、データサイズ制限など）

#### 技術決定と根拠

- 選択した技術の理由
- 代替案との比較
- トレードオフの分析

#### 既存パターンの踏襲または拡張

- プロジェクト内の既存パターン
- 踏襲するパターンの理由
- 拡張が必要な箇所

#### 統合ポイントと依存関係

- 統合が必要な既存コンポーネント
- 依存関係マップ
- 統合時の注意点

#### 特定されたリスクと緩和戦略

- リスク項目のリスト
- リスクの影響度と発生確率
- 緩和策

#### 潜在的なアーキテクチャパターンと境界オプション

- 適用可能なパターン候補
- 各パターンの利点と欠点
- 推奨パターンとその理由

#### 将来のタスクの並列化考慮事項

- 並列実行可能なタスク
- 依存関係によって直列化が必要なタスク
- クリティカルパスの特定

### 3. 調査ログへの結果の永続化

`docs/michi/{feature-name}/research/research.md` に以下を記録:

#### サマリーセクション

- 発見スコープ（何を調査したか）
- 主要な発見（3-5項目）
- 推奨事項

#### 調査ログトピック

各トピックについて:
- **トピック名**
- **ソース**: 参照URL、ドキュメント、コードベース
- **発見内容**: 詳細
- **影響**: 設計への影響

#### アーキテクチャパターン評価

- 評価したパターンのリスト
- 各パターンの評価
- 選択したパターンとその理由

#### 設計決定

- 決定事項
- 根拠
- 代替案との比較

#### リスク

- リスク項目
- 影響度
- 緩和策

## 出力形式

`research.md` の構造例:

```markdown
# 調査ログ: {feature-name}

## サマリー

### 発見スコープ
- [調査した範囲]

### 主要な発見
1. [発見1]
2. [発見2]
3. [発見3]

### 推奨事項
- [推奨1]
- [推奨2]

## 調査ログ

### [トピック1]
- **ソース**: [URL/ドキュメント]
- **発見内容**: [詳細]
- **影響**: [設計への影響]

### [トピック2]
...

## アーキテクチャパターン評価

### [パターン1]
- **概要**: [説明]
- **利点**: [利点]
- **欠点**: [欠点]
- **評価**: [選択/不採用]

## 設計決定

### [決定1]
- **決定事項**: [内容]
- **根拠**: [理由]
- **代替案**: [検討した代替案]

## リスク

### [リスク1]
- **影響度**: [高/中/低]
- **発生確率**: [高/中/低]
- **緩和策**: [対策]
```

## 注意事項

- **時間をかけすぎない**: 調査は1-2時間程度を目安に
- **完璧を求めない**: 重要な情報を押さえることが目的
- **継続的な更新**: 実装中に新たな発見があれば追記
